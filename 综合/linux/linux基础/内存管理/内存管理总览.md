![image](https://user-images.githubusercontent.com/20179983/131761086-7611bf28-7913-408c-b37e-6ff10153a231.png)
用户空间内存都是虚拟内存  
堆上分配内存也是虚拟内存  
vma：进程的虚拟内存空间会被分成不同的若干区域（程序段，数据段，堆，栈，bss等），每个区域都有其相关的属性和用途，一个合法的地址总是落在某个区域当中的，这些区域也不会重叠。在linux内核中，这样的区域被称之为虚拟内存区域(virtual memory areas),简称 VMA  
匿名页面：没有关联任何文件的页面。进程的malloc从堆上分配的内存，mmap匿名页上？  
page cache：关联文件的页面：看视频的文件缓存  
slab机制：管理特定大小的缓存，不需要页面分配器，可以快速分配和回收  
页面回收：系统短缺回收内存（通常是page cache和匿名页面），LRU链表（FIFO），最近最少使用，细分为活跃链表，不活跃链表，匿名链表，pagecache链表，通常喜欢回收pagecache  
干净的pagecache可以直接drop，脏的写回磁盘。 匿名页面无法被drop掉，通常进程的私有数据，需要写到交换分区，swap out。  
反向映射：reverse mapping：为页面回收服务，可以找到所有映射某个页面的虚拟地址空间（2.4，扫描所有进程，=》2.5 反向映射机制）  
KSM：合并内容相同的匿名页面，COW技术  
Huge page：2M,1G的页，减少trb miss的次数（普通页表只有4k）  
页迁移：内存规整，内存热插拔等使用  
内存规整：缓解内存碎片，两个扫描器，一个查找空闲页面，一个查找可迁移页面，然后规整    
OOM：杀掉内存高的进程  


