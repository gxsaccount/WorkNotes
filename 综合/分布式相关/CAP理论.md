CAP理论作为分布式系统的基础理论,它描述的是一个分布式系统在以下三个特性中：  

一致性（Consistency）  
可用性（Availability）  
分区容错性（Partition tolerance）  
最多满足其中的两个特性。分布式系统要么满足CA,要么CP，要么AP。无法同时满足CAP。  

# 一致性 #  
在分布式系统完成某写操作后任何读操作，都应该获取到该写操作写入的那个最新的值。**相当于要求分布式系统中的各节点时时刻刻保持数据的一致性。**  

强一致性  
对于关系型数据库，要求更新过的数据能被后续的访问都能看到，这是强一致性。  

弱一致性  
如果能容忍后续的部分或者全部访问不到，则是弱一致性。  

最终一致性  
如果经过一段时间后要求能访问到更新后的数据，则是最终一致性。  

# 可用性 #  
**一直可以正常的做读写操作。**  

# 分区容错性 #  
**部分故障不影响整体使用。**  

理解：  
# 简单证明：#   
N1和N2两台机器，N1和N2之间网络断开的时候，有用户向N1发送数据更新请求，那N1中的数据V0将被更新为V1，由于网络是断开的，所以分布式系统同步操作M，所以N2中的数据依旧是V0；这个时候，有用户向N2发送数据读取请求，由于数据还没有进行同步，应用程序没办法立即给用户返回最新的数据V1，怎么办呢？  
有二种选择，第一，牺牲数据一致性，响应旧的数据V0给用户；第二，牺牲可用性，阻塞等待，直到网络连接恢复，数据更新操作M完成之后，再给用户响应最新的数据V1。  
这个过程，证明了要满足分区容错性的分布式系统，只能在一致性和可用性两者中，选择其中一个  

# III. CAP三者不可兼得，该如何取舍：#  

(1) CA: 优先保证一致性和可用性，放弃分区容错。 这也意味着放弃系统的扩展性，系统不再是分布式的，有违设计的初衷。  
(2) CP: 优先保证一致性和分区容错性，放弃可用性。在数据一致性要求比较高的场合(譬如:zookeeper,Hbase) 是比较常见的做法，一旦发生网络故障或者消息丢失，就会牺牲用户体验，等恢复之后用户才逐渐能访问。  
(3) AP: 优先保证可用性和分区容错性，放弃一致性。NoSQL中的Cassandra 就是这种架构。跟CP一样，放弃一致性不是说一致性就不保证了，而是逐渐的变得一致。  
