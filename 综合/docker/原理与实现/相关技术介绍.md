Docker 是“新瓶装旧酒”的产物，依赖于 Linux 内核技术 unionFS，namespace 和 cgroup等技术。  
cgroup：
  
   CGroups 全称control group，用来限定一个进程的资源使用，由Linux 内核支持，可以限制和隔离Linux进程组 (process groups) 所使用的**物理资源** ，比如cpu，内存，磁盘和网络IO，是Linux container技术的物理基础。

namespace：
  另一个维度的资源隔离技术，大家可以把这个概念和我们熟悉的C++和Java里的namespace相对照。  
  如果CGroup设计出来的目的是为了隔离上面描述的物理资源，那么**namespace则用来隔离PID(进程ID),IPC,Network等系统资源**。   
  这些系统资源可以将它们分配给特定的Namespace，每个Namespace里面的资源对其他Namespace都是透明的。  
  不同container内的进程属于不同的Namespace，彼此透明，互不干扰。  
  Linux操作系统到目前为止支持的六种namespace：
  ![image](https://user-images.githubusercontent.com/20179983/130415780-de138a5e-48f6-4330-9197-daf759701889.png)  
unionFS：  
顾名思义，unionFS可以把文件系统上多个目录(也叫分支)内容联合挂载到同一个目录下，而目录的物理位置是分开的。  
1. boot file system （bootfs）：包含操作系统boot loader 和 kernel。用户不会修改这个文件系统。一旦启动完成后，整个Linux内核加载进内存，之后bootfs会被卸载掉，从而释放出内存。同样内核版本的不同的 Linux 发行版，其bootfs都是一致的。    
2. root file system （rootfs）：包含典型的目录结构，包括 /dev, /proc, /bin, /etc, /lib, /usr, and /tmp  
Linux 系统在启动时，roofs 首先会被挂载为只读模式，然后在启动完成后被修改为读写模式，随后它们就可以被修改了。  
不同的Linux版本，实现unionFS的技术可能不一样，使用命令docker info查看Storage Driver，查看实现技术  

  使用sudo mount **-t aufs** -o dirs=./abap:./java none ./mnt 进行测试  
  在java文件中进行改动，mnt也会改变，反之不行  
  
  **实际上这就是Docker容器镜像分层（容器 Copy-on-Write 特性）实现的技术基础。** 这种分层设计，一个优点就是资源共享。  
  容器镜像由多个镜像层组成，所有镜像层会联合在一起组成一个统一的文件系统。如果不同层中有一个相同路径的文件，比如 /text，上层的 /text 会覆盖下层的 /text，也就是说用户只能访问到上层中的文件 /text。  
  当用docker run启动这个容器时，实际上在镜像的顶部添加了一个新的可写层。这个可写层也叫容器层。  
  
  
